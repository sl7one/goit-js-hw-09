{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAO,CACXC,KAAMC,SAASC,cAAc,QAC7BC,IAAKF,SAASC,cAAc,WAG9B,IAAIE,EAAmB,EACnBC,EAAY,EA4BhB,SAASC,EAAcC,EAAUC,GAC/B,OAAO,IAAIC,SAAQ,CAACC,EAASC,KACLC,KAAKC,SAAW,GAEpCC,YAAW,KACTC,IACAlB,EAAAmB,OAAOC,QAAQ,mBAAmBV,EAAW,gBAAgBC,IAAQ,GACpEA,GAEHM,YAAW,KACTC,IACAlB,EAAAmB,OAAOE,QAAQ,kBAAkBX,EAAW,gBAAgBC,IAAQ,GACnEA,EAAM,G,CAKf,SAASO,IAGP,GAFAV,GAAa,EAETA,IAAcD,EAIhB,OAHAC,EAAY,EACZN,EAAKI,IAAIgB,UAAW,OACpBpB,EAAKI,IAAIiB,MAAMC,gBAAkB,oB,CAjDrCtB,EAAKC,KAAKsB,iBAAiB,UAE3B,SAAqBC,GACnBA,EAAMC,iBACN,MAAMC,EAAYxB,SAASyB,iBAAiB,SAE5C3B,EAAKI,IAAIgB,UAAW,EACpBpB,EAAKI,IAAIiB,MAAMC,gBAAkB,MAEjC,MAAMM,EAAS,CACbC,MAAOC,OAAOJ,EAAU,GAAGK,OAC3BtB,MAAOqB,OAAOJ,EAAU,GAAGK,OAC3BC,OAAQF,OAAOJ,EAAU,GAAGK,QAGxBE,EAAW,GACjB,IAAIxB,EAAQmB,EAAOC,MAEnB,IAAK,IAAIK,EAAI,EAAGA,EAAIN,EAAOI,OAAQE,IACjCD,EAASE,KAAK5B,EAAc2B,EAAGzB,IAC/BA,GAASmB,EAAOnB,MAElBJ,EAAmB4B,EAASG,OAC5B1B,QAAQ2B,IAAIJ,E","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst refs = {\n  form: document.querySelector('form'),\n  btn: document.querySelector('button'),\n};\n\nlet lastPromiseIndex = 0;\nlet promiseID = 0;\n\nrefs.form.addEventListener('submit', onFormClick);\n\nfunction onFormClick(event) {\n  event.preventDefault();\n  const inputRefs = document.querySelectorAll('input');\n\n  refs.btn.disabled = true;\n  refs.btn.style.backgroundColor = 'red';\n\n  const params = {\n    first: Number(inputRefs[0].value),\n    delay: Number(inputRefs[1].value),\n    amount: Number(inputRefs[2].value),\n  };\n\n  const promises = [];\n  let delay = params.first;\n\n  for (let i = 0; i < params.amount; i++) {\n    promises.push(createPromise(i, delay));\n    delay += params.delay;\n  }\n  lastPromiseIndex = promises.length;\n  Promise.all(promises);\n}\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n    if (shouldResolve) {\n      setTimeout(() => {\n        test();\n        Notify.success(`resolve position${position + 1}, with time ${delay}`);\n      }, delay);\n    } else {\n      setTimeout(() => {\n        test();\n        Notify.failure(`reject position${position + 1}, with time ${delay}`);\n      }, delay);\n    }\n  });\n}\n\nfunction test() {\n  promiseID += 1;\n  // console.log(promiseID, lastPromiseIndex);\n  if (promiseID === lastPromiseIndex) {\n    promiseID = 0;\n    refs.btn.disabled = !true;\n    refs.btn.style.backgroundColor = 'rgb(90, 189, 255)';\n    return;\n  }\n}\n"],"names":["$iQIUW","parcelRequire","$47d4ff9957288465$var$refs","form","document","querySelector","btn","$47d4ff9957288465$var$lastPromiseIndex","$47d4ff9957288465$var$promiseID","$47d4ff9957288465$var$createPromise","position","delay","Promise","resolve","reject","Math","random","setTimeout","$47d4ff9957288465$var$test","Notify","success","failure","disabled","style","backgroundColor","addEventListener","event","preventDefault","inputRefs","querySelectorAll","params","first","Number","value","amount","promises","i","push","length","all"],"version":3,"file":"03-promises.80264f3b.js.map"}